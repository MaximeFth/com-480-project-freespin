  <!DOCTYPE html>
  <html>
  <!-- Source for the sankey diagram inspiration code : https://www.d3-graph-gallery.com/graph/sankey_basic.html -->
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="author" content="Jeanmonod Xavier, Fellrath Maxime, Yura Tak">
    <meta name="description" content="NBA visualisation">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/sankey.js"></script>
    <link href="style.css" rel="stylesheet">
  </head>

  <body>
    <div id="headBand"></div>

    <div id ="title">
      <ul>
        <font size = "4">
         <li><a class="menuButtons" href="index.html">Home</a></li>
         <li><a class="menuButtons" href="sankeyDiagram.html">Sankey Diagrams</a></li>
         <li><a class="menuButtons" href="map.html">USA Map</a></li>
       </font>
     </ul>
   </div>
   <div id="content">
    <div id ="sankeyVisu">



    </div>
    <div id="features">
      <div id="choice">
        <font size="5">
          <form name="playerName" onSubmit="return readTeamsAndYear()">

            <label for="team-select">Which Team?</label>

            <select name="Teams" id="teamSelect">
              <option value="PHX">Phoenix Suns</option>
              <option value="GSW">Golden State Warriors</option>
              <option value="LAC">Los Angeles Clippers</option>
              <option value="LAL">Los Angeles Lakers</option>
              <option value="SAC">Sacramento Kings</option>
              <option value="DEN">Denver Nuggets</option>
              <option value="MIA">Miami Heat</option>
              <option value="ORL">Orlando Magic</option>
              <option value="ATL">Atlanta Hawks</option>
              <option value="CHI">Chicago Bulls</option>
              <option value="IND">Indiana Pacers</option>
              <option value="NOP">New Orleans Pelicans</option>
              <option value="BOS">Boston Celtics</option>
              <option value="DET">Detroit Pistons</option>
              <option value="MIN">Minnesota Timberwolves</option>
              <option value="BKN">Brooklyn Nets</option>
              <option value="NYK">New York Knicks</option>
              <option value="CHA">Charlotte Hornets</option>
              <option value="CLE">Cleveland Cavaliers</option>
              <option value="OKC">Oklahoma City Thunder</option>
              <option value="POR">Portland Trail Blazers</option>
              <option value="PHI">Philadelphia 76ers</option>
              <option value="MEM">Memphis Grizzlies</option>
              <option value="DAL">Dallas Mavericks</option>
              <option value="HOU">Houston Rockets</option>
              <option value="SAS">San Antonio Spurs</option>
              <option value="UTA">Utah Jazz</option>
              <option value="MIL">Milwaukee Bucks</option>
              <option value="WAS">Washington Wizards</option>
            </select>
            <br>
            <label for="season">Which Season?</label>

            <select name="Season" id="seasonSelect">
              <option value="">--Please choose a Season--</option>
              <option value="1980">1980</option>
              <option value="1981">1981</option>
              <option value="1982">1982</option>
              <option value="1983">1983</option>
              <option value="1984">1984</option>
              <option value="1985">1985</option>
              <option value="1986">1986</option>
              <option value="1987">1987</option>
              <option value="1988">1988</option>
              <option value="1989">1989</option>
              <option value="1990">1990</option>        
              <option value="1991">1991</option>
              <option value="1992">1992</option>
              <option value="1993">1993</option>
              <option value="1994">1994</option>
              <option value="1995">1995</option>
              <option value="1996">1996</option>
              <option value="1997">1997</option>
              <option value="1998">1998</option>
              <option value="1999">1999</option>
              <option value="2000">2000</option>
              <option value="2001">2001</option>
              <option value="2002">2002</option>
              <option value="2003">2003</option>
              <option value="2004">2004</option>
              <option value="2005">2005</option>
              <option value="2006">2006</option>
              <option value="2007">2007</option>
              <option value="2008">2008</option>
              <option value="2009">2009</option>
              <option value="2010">2010</option>
              <option value="2011">2011</option>
              <option value="2012">2012</option>
              <option value="2013">2013</option>
              <option value="2014">2014</option>
              <option value="2015">2015</option>
              <option value="2016">2016</option>
              <option value="2017">2017</option>
              <input name="Submit"  type="submit" value="submit" >
            </form>
          </select>


          <br>
          <br>


        </font>



      </div>

    </div>
    <div id = "playersBox">
      <form id="players_selected">



      </form>
    </div>
  </div>

  <script>
  function download(content, fileName, contentType) {
    var a = document.createElement("a");
    var file = new Blob([content], {type: contentType});
    a.href = URL.createObjectURL(file);
    a.download = fileName;
    a.click();
  }
  function listToBoxes(mylist){


    for (var i = 0; i < mylist.length; i++) {
      document.getElementById('players_selected').innerHTML += "\n";
      document.getElementById('players_selected').innerHTML += "<input type=\"checkbox\"name = selectedPlayers  id=\"players"+i+"\"  value="+mylist[i]+"> ";
      document.getElementById('players_selected').innerHTML += "\n";
      document.getElementById('players_selected').innerHTML += "<font size =5><label for=\"players"+i+"\">"+ mylist[i]+"</label></font><br>";

    };
    document.getElementById('players_selected').innerHTML += "<button id=\"select\">Submit</button>";


    document.getElementById('select').onclick = function() {
      var checkboxes = document.getElementsByName('selectedPlayers');
      for (var checkbox of checkboxes) {
        if (checkbox.checked)
          console.log(checkbox.value + ' ');
      }
    };

    var nodesa = {nodes:[
      {node:0,name:"Player 1"},
      {node:1,name:"Player 2"},
      {node:2,name:"Player 3"},
      {node:3,name:"Player 4"},
      {node:4,name:"Player 5"},
      {node:5,name:"Points"},
      {node:6,name:"Assists"},
      {node:7,name:"Rebounds"},
      {node:8,name:"Blocks"},
      {node:9,name:"Steals"}
      ],
      links:[
      {source:0,target:5,value:1},
      {source:0,target:6,value:2},
      {source:0,target:7,value:2},
      {source:0,target:8,value:2},
      {source:0,target:9,value:2},

      {source:1,target:5,value:1},
      {source:1,target:6,value:2},
      {source:1,target:7,value:2},
      {source:1,target:8,value:2},
      {source:1,target:9,value:2},

      {source:2,target:5,value:5},
      {source:2,target:6,value:1},
      {source:2,target:7,value:4},
      {source:2,target:8,value:2},
      {source:2,target:9,value:1},

      {source:3,target:5,value:1},
      {source:3,target:6,value:3},
      {source:3,target:7,value:2},
      {source:3,target:8,value:2},
      {source:3,target:9,value:3},

      {source:4,target:5,value:1},
      {source:4,target:6,value:3},
      {source:4,target:7,value:3},
      {source:4,target:8,value:2},
      {source:4,target:9,value:1}


      ]};
  var json = JSON.stringify(nodesa);



      return 1;

    };

    function readTeamsAndYear(event){
      var year = document.getElementById("seasonSelect").value.toUpperCase();

      var tm = document.getElementById("teamSelect").value.toUpperCase();

      console.log("DATA/players_teams_seasons/"+tm+year+".csv");
      var players = [
      ];

      d3.csv("DATA/players_teams_seasons/"+tm+year+".csv",  function(data) {
        for (var i = 0; i < data.length; i++) {
          players.push(data[i].Player)
        };
        document.getElementById('players_selected').innerHTML = "";

        (listToBoxes(players));



      });
      return false;
    }; 


var updateDiagram = function(url, implementationCode, location){
    //url is URL of external file, implementationCode is the code
    //to be called from the file, location is the location to 
    //insert the <script> element

    var scriptTag = document.createElement('script');
    scriptTag.src = url;

    scriptTag.onload = implementationCode;
    scriptTag.onreadystatechange = implementationCode;

    location.appendChild(scriptTag);
};
var yourCodeToBeCalled = function(){
console.log("pii");
}
updateDiagram('sanskeyDiagram.js', yourCodeToBeCalled, document.body);
        





    </script>

  </body>

  </html>
